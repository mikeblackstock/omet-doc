<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 1999-2012 by the authors.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on March 17, 2014 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond Learning Manual: 4.4.3 Outside-staff objects</title>

<meta name="description" content="LilyPond Learning Manual: 4.4.3 Outside-staff objects">
<meta name="keywords" content="LilyPond Learning Manual: 4.4.3 Outside-staff objects">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.hu.html#index" rel="start" title="LilyPond &mdash; Learning Manual">
<link href="lilypond-index.hu.html#lilypond-index" rel="index" title="C. LilyPond index">
<link href="index_toc.hu.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index_abt.hu.html#SEC_About" rel="help" title="About This Document">
<link href="placement-of-objects.hu.html#placement-of-objects" rel="up" title="4.4 Placement of objects">
<link href="lilypond-index.hu.html#lilypond-index" rel="next" title="C. LilyPond index">
<link href="within_002dstaff-objects.hu.html#within_002dstaff-objects" rel="previous" title="4.4.2 Within-staff objects">
<link rel="stylesheet" type="text/css" title="Default style" href="../../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../../Documentation/css/lilypond-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">


<div id="main">
<a name="Outside_002dstaff-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="tweaking-output.hu.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.hu.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.hu.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-index.hu.html" title="Index" rel="index">Index</a>][<a href="index_abt.hu.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="templates.hu.html" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="within_002dstaff-objects.hu.html#fingering" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fingering&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="placement-of-objects.hu.html" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Placement of objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#the-outside_002dstaff_002dpriority-property" title="Next section in reading order" accesskey="n" rel="next">&nbsp;The outside-staff-priority property &gt; </a>]</td></tr></table>
<a name="outside_002dstaff-objects"></a>
<h3 class="subsection">4.4.3 Outside-staff objects</h3>

<p>Outside-staff objects are automatically placed to avoid collisions.
There are several ways to override the automatic placement if the
positioning is not optimum.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#the-outside_002dstaff_002dpriority-property" accesskey="1">The <code>outside-staff-priority</code> property</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#the-textlengthon-command" accesskey="2">The <code>\textLengthOn</code> command</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#dynamics-placement" accesskey="3">Dynamics placement</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#grob-sizing" accesskey="4">Grob sizing</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="The-outside_002dstaff_002dpriority-property"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="tweaking-output.hu.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.hu.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.hu.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-index.hu.html" title="Index" rel="index">Index</a>][<a href="index_abt.hu.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="templates.hu.html" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#outside_002dstaff-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Outside-staff objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#outside_002dstaff-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Outside-staff objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#the-textlengthon-command" title="Next section in reading order" accesskey="n" rel="next">&nbsp;The textLengthOn command &gt; </a>]</td></tr></table>
<a name="the-outside_002dstaff_002dpriority-property"></a>
<h4 class="unnumberedsubsubsec">The <code>outside-staff-priority</code> property</h4>

<p>Objects with the lower value of the <code>outside-staff-priority</code>
property are placed nearer to the staff, and other outside-staff
objects are then raised as far as necessary to avoid collisions.
The <code>outside-staff-priority</code> is defined in the
<code>grob-interface</code> and so is a property of all layout objects.
By default it is set to <code>#f</code> for all within-staff objects,
and to a numerical value appropriate to each outside-staff object
when the object is created.  The following table shows the default
numerical values for some of the commonest outside-staff objects.
</p>
<a name="index-spanners"></a>

<p>Note the unusual names for some of the objects: spanner objects
are automatically created to control the vertical positioning of
grobs which (might) start and end at different musical moments, so
changing the <code>outside-staff-priority</code> of the underlying grob
will have no effect.  For example, changing
<code>outside-staff-priority</code> of the <code>Hairpin</code> object will
have no effect on the vertical positioning of hairpins &ndash; you must
change <code>outside-staff-priority</code> of the associated
<code>DynamicLineSpanner</code> object instead.  This override must be
placed at the start of the spanner, which might include several
linked hairpins and dynamics.
</p>
<table>
<thead><tr><th width="30%">Layout Object</th><th width="30%">Priority</th><th width="30%">Controls position of:</th></tr></thead>
<tr><td width="30%"><code>RehearsalMark</code></td><td width="30%"><code>1500</code></td><td width="30%">Rehearsal marks</td></tr>
<tr><td width="30%"><code>MetronomeMark</code></td><td width="30%"><code>1000</code></td><td width="30%">Metronome marks</td></tr>
<tr><td width="30%"><code>VoltaBracketSpanner</code></td><td width="30%"><code>600</code></td><td width="30%">Volta brackets</td></tr>
<tr><td width="30%"><code>TextScript</code></td><td width="30%"><code>450</code></td><td width="30%">Markup text</td></tr>
<tr><td width="30%"><code>MultiMeasureRestText</code></td><td width="30%"><code>450</code></td><td width="30%">Markup text over full-bar rests</td></tr>
<tr><td width="30%"><code>OttavaBracket</code></td><td width="30%"><code>400</code></td><td width="30%">Ottava brackets</td></tr>
<tr><td width="30%"><code>TextSpanner</code></td><td width="30%"><code>350</code></td><td width="30%">Text spanners</td></tr>
<tr><td width="30%"><code>DynamicLineSpanner</code></td><td width="30%"><code>250</code></td><td width="30%">All dynamic markings</td></tr>
<tr><td width="30%"><code>BarNumber</code></td><td width="30%"><code> 100</code></td><td width="30%">Bar numbers</td></tr>
<tr><td width="30%"><code>TrillSpanner</code></td><td width="30%"><code>50</code></td><td width="30%">Spanning trills</td></tr>
</table>

<p>Here is an example showing the default placement of some of
these.
</p>
<a name="index-text-spanner"></a>
<a name="index-ottava-bracket"></a>

<a name="index-_005cstartTextSpan"></a>
<a name="index-_005cstartTextSpan-1"></a>
<a name="index-startTextSpan"></a>
<a name="index-startTextSpan-1"></a>
<a name="index-_005cstopTextSpan"></a>
<a name="index-_005cstopTextSpan-1"></a>
<a name="index-stopTextSpan"></a>
<a name="index-stopTextSpan-1"></a>

<a name="index-TextSpanner_002c-example-of-overriding"></a>
<a name="index-bound_002ddetails-property_002c-example"></a>

<blockquote><pre class="verbatim">% Set details for later Text Spanner
\override TextSpanner.bound-details.left.text
    = \markup { \small \bold Slower }
% Place dynamics above staff
\dynamicUp
% Start Ottava Bracket
\ottava #1
c'4 \startTextSpan
% Add Dynamic Text and hairpin
c4\pp\&lt;
c4
% Add Text Script
c4^Text |
c4 c
% Add Dynamic Text and terminate hairpin
c4\ff c \stopTextSpan |
% Stop Ottava Bracket
\ottava #0
c,4 c c c |
</pre><p>
 <a href="../bd/lily-6a9d94d8.ly">
  <img align="middle"
       border="0"
       src="../bd/lily-6a9d94d8.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This example also shows how to create Text Spanners &ndash;
text with extender lines above a section of music.  The
spanner extends from the <code>\startTextSpan</code> command to
the <code>\stopTextSpan</code> command, and the format of the
text is defined by the <code>\override TextSpanner</code> command.
For more details see <a name="index-Text-spanners"></a>
<a href="../notation/writing-text.hu.html#text-spanners">Text spanners</a>.
</p>
<p>It also shows how ottava brackets are created.
</p>
<a name="index-tweaking-bar-number-placement"></a>
<a name="index-bar-numbers_002c-tweaking-placement"></a>
<a name="index-tweaking-metronome-mark-placement"></a>
<a name="index-metronome-mark_002c-tweaking-placement"></a>
<a name="index-tweaking-rehearsal-mark-placement"></a>
<a name="index-rehearsal-marks_002c-tweaking-placement"></a>

<p>If the default values of <code>outside-staff-priority</code> do not give you
the placing you want, the priority of any of the objects may be
overridden.  Suppose we would like the ottava bracket to be placed
below the text spanner in the example above.  All we need to do is to
look up the priority of <code>OttavaBracket</code> in the IR or in the
tables above, and reduce it to a value lower than that of a
<code>TextSpanner</code>, remembering that <code>OttavaBracket</code> is created
in the <code>Staff</code> context:
</p>
<a name="index-TextSpanner_002c-example-of-overriding-1"></a>
<a name="index-bound_002ddetails-property_002c-example-1"></a>

<blockquote><pre class="verbatim">% Set details for later Text Spanner
\override TextSpanner.bound-details.left.text
    = \markup { \small \bold Slower }
% Place dynamics above staff
\dynamicUp
% Place following Ottava Bracket below Text Spanners
\once \override Staff.OttavaBracket.outside-staff-priority = #340
% Start Ottava Bracket
\ottava #1
c'4 \startTextSpan
% Add Dynamic Text
c4\pp
% Add Dynamic Line Spanner
c4\&lt;
% Add Text Script
c4^Text |
c4 c
% Add Dynamic Text
c4\ff c \stopTextSpan |
% Stop Ottava Bracket
\ottava #0
c,4 c c c |
</pre><p>
 <a href="../00/lily-21876455.ly">
  <img align="middle"
       border="0"
       src="../00/lily-21876455.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Note that some of these objects, in particular bar numbers,
metronome marks and rehearsal marks, live by default in the
<code>Score</code> context, so be sure to use the correct context
when these are being overriden.
</p>
<a name="index-slurs-and-outside_002dstaff_002dpriority"></a>
<a name="index-slurs-and-articulations"></a>
<a name="index-articulations-and-slurs"></a>

<p>Slurs by default are classed as within-staff objects, but
they often appear above the staff if the notes to
which they are attached are high on the staff.  This can push
outside-staff objects such as articulations too high, as the slur
will be placed first.  The <code>avoid-slur</code> property of the
articulation can be set to <code>'inside</code> to bring the articulation
inside the slur, but the <code>avoid-slur</code> property is effective
only if the <code>outside-staff-priority</code> is also set to <code>#f</code>.
Alternatively, the <code>outside-staff-priority</code> of the slur
can be set to a numerical value to cause it to be placed along with
other outside-staff objects according to that value.  Here&rsquo;s an
example showing the effect of the two methods:
</p>
<blockquote><pre class="verbatim">c4( c^\markup { \tiny \sharp } d4.) c8 |
c4(
\once \override TextScript.avoid-slur = #'inside
\once \override TextScript.outside-staff-priority = ##f
c4^\markup { \tiny \sharp } d4.) c8 |
\once \override Slur.outside-staff-priority = #500
c4( c^\markup { \tiny \sharp } d4.) c8 |
</pre><p>
 <a href="../0a/lily-73c12622.ly">
  <img align="middle"
       border="0"
       src="../0a/lily-73c12622.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Changing the <code>outside-staff-priority</code> can also be used to
control the vertical placement of individual objects, although
the results may not always be desirable.  Suppose we would
like &ldquo;Text3&rdquo; to be placed above &ldquo;Text4&rdquo; in the example
under Automatic behavior, above (see <a href="automatic-behavior.hu.html">Automatic behavior</a>).
All we need to do is to look up the priority of <code>TextScript</code>
in the IR or in the tables above, and increase the priority of
&ldquo;Text3&rdquo; to a higher value:
</p>
<a name="index-TextScript_002c-example-of-overriding"></a>
<a name="index-outside_002dstaff_002dpriority-property_002c-example"></a>

<blockquote><pre class="verbatim">c2^&quot;Text1&quot;
c2^&quot;Text2&quot; |
\once \override TextScript.outside-staff-priority = #500
c2^&quot;Text3&quot;
c2^&quot;Text4&quot; |
</pre><p>
 <a href="../f8/lily-2c920610.ly">
  <img align="middle"
       border="0"
       src="../f8/lily-2c920610.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This certainly lifts &ldquo;Text3&rdquo; above &ldquo;Text4&rdquo; but it also lifts it
above &ldquo;Text2&rdquo;, and &ldquo;Text4&rdquo; now drops down.  Perhaps this is not
so good.  What we would really like to do is to position all the
annotation at the same distance above the staff.  To do this, we
clearly will need to space the notes out horizontally to make more
room for the text.  This is done using the <code>textLengthOn</code>
command.
</p>
<hr size="6">
<a name="The-textLengthOn-command"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="tweaking-output.hu.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.hu.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.hu.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-index.hu.html" title="Index" rel="index">Index</a>][<a href="index_abt.hu.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="templates.hu.html" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#the-outside_002dstaff_002dpriority-property" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; The outside-staff-priority property&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#outside_002dstaff-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Outside-staff objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#dynamics-placement" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Dynamics placement &gt; </a>]</td></tr></table>
<a name="the-textlengthon-command"></a>
<h4 class="unnumberedsubsubsec">The <code>\textLengthOn</code> command</h4>

<a name="index-notes_002c-spreading-out-with-text"></a>

<a name="index-_005ctextLengthOn"></a>
<a name="index-_005ctextLengthOn-1"></a>
<a name="index-textLengthOn"></a>
<a name="index-textLengthOn-1"></a>
<a name="index-_005ctextLengthOff"></a>
<a name="index-_005ctextLengthOff-1"></a>
<a name="index-textLengthOff"></a>
<a name="index-textLengthOff-1"></a>

<p>By default, text produced by markup takes up no horizontal space
as far as laying out the music is concerned.  The <code>\textLengthOn</code>
command reverses this behavior, causing the notes to be spaced
out as far as is necessary to accommodate the text:
</p>
<blockquote><pre class="verbatim">\textLengthOn  % Cause notes to space out to accommodate text
c2^&quot;Text1&quot;
c2^&quot;Text2&quot; |
c2^&quot;Text3&quot;
c2^&quot;Text4&quot; |
</pre><p>
 <a href="../bf/lily-c46e6efb.ly">
  <img align="middle"
       border="0"
       src="../bf/lily-c46e6efb.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The command to revert to the default behavior is
<code>\textLengthOff</code>.  Alternatively, <code>\once</code> may be used
with <code>\textLengthOn</code> if the effect is to be limited to just a
single musical moment.
The corresponding spacing behavior for rehearsal marks and tempo
indications is independently controlled with the commands
<code>\markLengthOn</code> and <code>\markLengthOff</code>.
</p>
<a name="index-markup-text_002c-allowing-collisions"></a>

<p>Markup text will also avoid notes which project above the staff.
If this is not desired, the automatic displacement upwards may
be turned off by setting the priority to <code>#f</code>.  Here&rsquo;s an
example to show how markup text interacts with such notes.
</p>
<a name="index-TextScript_002c-example-of-overriding-1"></a>
<a name="index-outside_002dstaff_002dpriority-property_002c-example-1"></a>

<blockquote><pre class="verbatim">% This markup is short enough to fit without collision
c2^&quot;Tex&quot; c'' |
R1 |

% This is too long to fit, so it is displaced upwards
c,,2^&quot;Text&quot; c'' |
R1 |

% Turn off collision avoidance
\once \override TextScript.outside-staff-priority = ##f
c,,2^&quot;Long Text   &quot; c'' |
R1 |

% Turn off collision avoidance
\once \override TextScript.outside-staff-priority = ##f
\textLengthOn        % and turn on textLengthOn
c,,2^&quot;Long Text   &quot;  % Spaces at end are honored
c''2 |
</pre><p>
 <a href="../6a/lily-794eb932.ly">
  <img align="middle"
       border="0"
       src="../6a/lily-794eb932.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Dynamics-placement"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="tweaking-output.hu.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.hu.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.hu.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-index.hu.html" title="Index" rel="index">Index</a>][<a href="index_abt.hu.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="templates.hu.html" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#the-textlengthon-command" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; The textLengthOn command&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#outside_002dstaff-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Outside-staff objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#grob-sizing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Grob sizing &gt; </a>]</td></tr></table>
<a name="dynamics-placement"></a>
<h4 class="unnumberedsubsubsec">Dynamics placement</h4>

<a name="index-tweaking-dynamics-placement"></a>
<a name="index-dynamics_002c-tweaking-placement"></a>

<p>Dynamic markings will normally be positioned beneath the
staff, but may be positioned above with the <code>\dynamicUp</code>
command.  They will be positioned vertically relative to the
note to which they are attached, and will float below (or above)
all within-staff objects such as phrasing slurs and bar numbers.
This can give quite acceptable results, as this example
shows:
</p>
<blockquote><pre class="verbatim">\clef &quot;bass&quot;
\key aes \major
\time 9/8
\dynamicUp
bes4.~\f\&lt; \( bes4 bes8 des4\ff\&gt; c16 bes\! |
ees,2.~\)\mf ees4 r8 |
</pre><p>
 <a href="../d3/lily-d56f76a1.ly">
  <img align="middle"
       border="0"
       src="../d3/lily-d56f76a1.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>However, if the notes and attached dynamics are close
together the automatic placement will avoid collisions
by displacing later dynamic markings further away, but this may
not be the optimum placement, as this rather artificial example
shows:
</p>
<blockquote><pre class="verbatim">\dynamicUp
a4\f b\mf a\mp b\p
</pre><p>
 <a href="../55/lily-4bde3fb5.ly">
  <img align="middle"
       border="0"
       src="../55/lily-4bde3fb5.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Should a similar situation arise in &lsquo;real&rsquo; music, it may be
preferable to space out the notes a little further, so the dynamic
markings can all fit at the same vertical distance from the staff.  We
were able to do this for markup text by using the <code>\textLengthOn</code>
command, but there is no equivalent command for dynamic marks.  So we
shall have to work out how to do this using <code>\override</code> commands.
</p>
<hr size="6">
<a name="Grob-sizing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="tweaking-output.hu.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.hu.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.hu.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-index.hu.html" title="Index" rel="index">Index</a>][<a href="index_abt.hu.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="templates.hu.html" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#dynamics-placement" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Dynamics placement&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#outside_002dstaff-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Outside-staff objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="vertical-spacing.hu.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vertical spacing &gt; </a>]</td></tr></table>
<a name="grob-sizing"></a>
<h4 class="unnumberedsubsubsec">Grob sizing</h4>

<a name="index-grob-sizing"></a>
<a name="index-sizing-grobs"></a>

<p>First we must learn how grobs are sized.  All grobs have a
reference point defined within them which is used to position
them relative to their parent object.  This point in the grob
is then positioned at a horizontal distance, <code>X-offset</code>,
and at a vertical distance, <code>Y-offset</code>, from its parent.
The horizontal extent of the object is given by a pair of
numbers, <code>X-extent</code>, which say where the left and right
edges are relative to the reference point.  The vertical extent
is similarly defined by a pair of numbers, <code>Y-extent</code>.
These are properties of all grobs which support the
<code>grob-interface</code>.
</p>
<a name="index-extra_002dspacing_002dwidth"></a>

<p>By default, outside-staff objects are given a width of zero so
that they may overlap in the horizontal direction.  This is done
by the trick of making the leftmost extent infinity and
the rightmost extent minus infinity by setting the
<code>extra-spacing-width</code> to <code>'(+inf.0 . -inf.0)</code>.  To
ensure they do not overlap in the horizontal direction we
must override this value of <code>extra-spacing-width</code> to give them
a little extra spacing.  The units are the space between two staff
lines, so moving the left edge half a unit to the left and the
right edge half a unit to the right should do it:
</p>
<blockquote><pre class="example">\override DynamicText.extra-spacing-width = #'(-0.5 . 0.5)
</pre></blockquote>

<p>Let&rsquo;s see if this works in our previous example:
</p>
<a name="index-DynamicText_002c-example-of-overriding"></a>
<a name="index-extra_002dspacing_002dwidth-property_002c-example"></a>


<blockquote><pre class="verbatim">\dynamicUp
% Extend width by 1 staff space
\override DynamicText.extra-spacing-width = #'(-0.5 . 0.5)
a4\f b\mf a\mp b\p
</pre><p>
 <a href="../4d/lily-382aafe5.ly">
  <img align="middle"
       border="0"
       src="../4d/lily-382aafe5.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This looks better, but maybe we would prefer the dynamic marks
to be aligned along the same baseline rather than going up and
down with the notes.  The property to do this is
<code>staff-padding</code> which is covered in the section on collisions
(see <a href="collisions-of-objects.hu.html">Collisions of objects</a>).
</p>

<hr size="6">
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="tweaking-output.hu.html" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.hu.html" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.hu.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="lilypond-index.hu.html" title="Index" rel="index">Index</a>][<a href="index_abt.hu.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="templates.hu.html" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#dynamics-placement" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Dynamics placement&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#outside_002dstaff-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Outside-staff objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="vertical-spacing.hu.html" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vertical spacing &gt; </a>]</td></tr></table>
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /home/gub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-stable-2.18/scripts/build/out/www_post -->
<p class="footer_version">
This page is for LilyPond-2.18.2 (stable-branch).
</p>
<p class="footer_report">
We welcome your aid; please <a href="http://lilypond.org/help-us.html">help us</a> by reporting errors to our <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">bug list</a>.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /home/gub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-stable-2.18/scripts/build/out/www_post -->
 Más nyelvek: <a href="outside_002dstaff-objects.cs.html">česky</a>, <a href="outside_002dstaff-objects.de.html">deutsch</a>, <a href="outside_002dstaff-objects.es.html">español</a>, <a href="outside_002dstaff-objects.fr.html">français</a>, <a href="outside_002dstaff-objects.it.html">italiano</a>, <a href="outside_002dstaff-objects.ja.html">日本語</a>, <a href="outside_002dstaff-objects.nl.html">nederlands</a>.
 <br>
 About <a href="http://www.lilypond.org/website/misc/browser-language">automatic language selection</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../../Documentation/web/manuals.html"
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="index.hu.html" title="Start of the manual">LilyPond &mdash; Learning Manual  v2.18.2 (stable-branch). </a></h4>
<div class="contents">
<ul class="toc">
  <li class=""><a name="toc-Tutorial-1" href="tutorial.hu.html">1. Tutorial</a>
  <ul class="toc">
    <li class=""><a name="toc-Compiling-a-file-1" href="compiling-a-file.hu.html">1.1 Compiling a file</a>    </li>
    <li class=""><a name="toc-How-to-write-input-files-1" href="how-to-write-input-files.hu.html">1.2 How to write input files</a>    </li>
    <li class=""><a name="toc-Dealing-with-errors-1" href="dealing-with-errors.hu.html">1.3 Dealing with errors</a>    </li>
    <li class=""><a name="toc-How-to-read-the-manuals-1" href="how-to-read-the-manuals.hu.html">1.4 How to read the manuals</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Common-notation-1" href="common-notation.hu.html">2. Common notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Single-staff-notation-1" href="single-staff-notation.hu.html">2.1 Single staff notation</a>    </li>
    <li class=""><a name="toc-Multiple-notes-at-once-1" href="multiple-notes-at-once.hu.html">2.2 Multiple notes at once</a>    </li>
    <li class=""><a name="toc-Songs-1" href="songs.hu.html">2.3 Songs</a>    </li>
    <li class=""><a name="toc-Final-touches-1" href="final-touches.hu.html">2.4 Final touches</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Fundamental-concepts-1" href="fundamental-concepts.hu.html">3. Fundamental concepts</a>
  <ul class="toc">
    <li class=""><a name="toc-How-LilyPond-input-files-work-1" href="how-lilypond-input-files-work.hu.html">3.1 How LilyPond input files work</a>    </li>
    <li class=""><a name="toc-Voices-contain-music-1" href="voices-contain-music.hu.html">3.2 Voices contain music</a>    </li>
    <li class=""><a name="toc-Contexts-and-engravers-1" href="contexts-and-engravers.hu.html">3.3 Contexts and engravers</a>    </li>
    <li class=""><a name="toc-Extending-the-templates-1" href="extending-the-templates.hu.html">3.4 Extending the templates</a>    </li>
  </ul>
  </li>
  <li class=" toc_current"><a name="toc-Tweaking-output-1" href="tweaking-output.hu.html">4. Tweaking output</a>
  <ul class="toc">
    <li class=""><a name="toc-Tweaking-basics-1" href="tweaking-basics.hu.html">4.1 Tweaking basics</a>    </li>
    <li class=""><a name="toc-The-Internals-Reference-manual-1" href="the-internals-reference-manual.hu.html">4.2 The Internals Reference manual</a>    </li>
    <li class=""><a name="toc-Appearance-of-objects-1" href="appearance-of-objects.hu.html">4.3 Appearance of objects</a>    </li>
    <li class=" toc_current"><a name="toc-Placement-of-objects-1" href="placement-of-objects.hu.html">4.4 Placement of objects</a>
    <ul class="toc">
      <li class=""><a name="toc-Automatic-behavior-1" href="automatic-behavior.hu.html">4.4.1 Automatic behavior</a>      </li>
      <li class=""><a name="toc-Within_002dstaff-objects-1" href="within_002dstaff-objects.hu.html">4.4.2 Within-staff objects</a>      </li>
      <li class=" toc_current"><a name="toc-Outside_002dstaff-objects-1" href="outside_002dstaff-objects.hu.html">4.4.3 Outside-staff objects</a>
      <ul class="toc">
        <li class=""><a name="toc-The-outside_002dstaff_002dpriority-property-1" href="outside_002dstaff-objects.hu.html#the-outside_002dstaff_002dpriority-property">The <code>outside-staff-priority</code> property</a>        </li>
        <li class=""><a name="toc-The-_005ctextLengthOn-command" href="outside_002dstaff-objects.hu.html#the-textlengthon-command">The <code>\textLengthOn</code> command</a>        </li>
        <li class=""><a name="toc-Dynamics-placement-1" href="outside_002dstaff-objects.hu.html#dynamics-placement">Dynamics placement</a>        </li>
        <li class=""><a name="toc-Grob-sizing-1" href="outside_002dstaff-objects.hu.html#grob-sizing">Grob sizing</a>        </li>
      </ul>
      </li>
    </ul>
    </li>
    <li class=""><a name="toc-Vertical-spacing-1" href="vertical-spacing.hu.html">4.5 Vertical spacing</a>    </li>
    <li class=""><a name="toc-Collisions-of-objects-1" href="collisions-of-objects.hu.html">4.6 Collisions of objects</a>    </li>
    <li class=""><a name="toc-Further-tweaking-1" href="further-tweaking.hu.html">4.7 Further tweaking</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Templates-1" href="templates.hu.html">A. Templates</a>
  <ul class="toc">
    <li class=""><a name="toc-Single-staff-templates-1" href="single-staff-templates.hu.html">A.1 Single staff templates</a>    </li>
    <li class=""><a name="toc-Piano-templates-1" href="piano-templates.hu.html">A.2 Piano templates</a>    </li>
    <li class=""><a name="toc-String-quartet-templates-1" href="string-quartet-templates.hu.html">A.3 String quartet templates</a>    </li>
    <li class=""><a name="toc-Vocal-ensembles-templates-1" href="vocal-ensembles-templates.hu.html">A.4 Vocal ensembles templates</a>    </li>
    <li class=""><a name="toc-Orchestral-templates-1" href="orchestral-templates.hu.html">A.5 Orchestral templates</a>    </li>
    <li class=""><a name="toc-Ancient-notation-templates-1" href="ancient-notation-templates.hu.html">A.6 Ancient notation templates</a>    </li>
    <li class=""><a name="toc-Other-templates-1" href="other-templates.hu.html">A.7 Other templates</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="gnu-free-documentation-license.hu.html">B. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-LilyPond-index-1" href="lilypond-index.hu.html">C. LilyPond index</a>  </li>
<li>
<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.15.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.15" in the
search for a while and have a redirection from "v2.15" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.18 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.18 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.18 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Google Search">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Search">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
